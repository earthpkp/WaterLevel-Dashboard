# ✨ คู่มือเริ่มต้นใช้งาน Date Picker

## 🎯 วิธีการนำเข้าข้อมูลจาก API (อัปเดตล่าสุด!)

### ขั้นตอนการใช้งาน

1. **เปิดหน้า Observe Data**
   - ไปที่ http://localhost:3000/observe
   - หรือคลิกเมนู "Observe Data"

2. **คลิกปุ่มนำเข้าข้อมูล**
   - คลิกปุ่ม "📡 ดึงข้อมูลจาก API" (สีส้ม)
   - จะเปิด dialog ขึ้นมา

3. **เลือกวันที่**
   
   **กรณีดึงข้อมูลวันเดียว:**
   - คลิกช่อง "วันที่เริ่มต้น" → เลือกวันที่จากปฏิทิน
   - เว้นช่อง "วันที่สิ้นสุด" ไว้ว่าง
   - คลิก "✅ ยืนยันนำเข้า"

   **กรณีดึงข้อมูลหลายวัน:**
   - คลิกช่อง "วันที่เริ่มต้น" → เลือกวันที่เริ่มต้น
   - คลิกช่อง "วันที่สิ้นสุด" → เลือกวันที่สิ้นสุด
   - คลิก "✅ ยืนยันนำเข้า"

4. **รอการดำเนินการ**
   - ระบบจะแสดงสถานะ "⏳ กำลังนำเข้า..."
   - รอจนกว่าจะเสร็จสิ้น

5. **ตรวจสอบผลลัพธ์**
   - จะแสดงข้อความสีเขียวเมื่อสำเร็จ
   - ข้อมูลจะ refresh อัตโนมัติหลัง 3 วินาที

---

## 📸 ตัวอย่างหน้าจอ

### ปุ่มนำเข้าข้อมูล
```
┌─────────────────────────────────────────────┐
│ 🔄 รีเฟรชข้อมูล                             │
│ 📡 ดึงข้อมูลจาก API  ← คลิกที่นี่           │
│ 📥 ดาวน์โหลด CSV                            │
│ 📤 นำเข้า Forecast CSV                      │
└─────────────────────────────────────────────┘
```

### Dialog เลือกวันที่
```
┌────────────────────────────────────────────┐
│ 📡 นำเข้าข้อมูลจาก API กรมชลประทาน        │
├────────────────────────────────────────────┤
│                                            │
│ วันที่เริ่มต้น: *                         │
│ [2025-11-09 📅] ← คลิกเพื่อเลือกวันที่    │
│                                            │
│ วันที่สิ้นสุด: (ไม่บังคับ)               │
│ [2025-11-13 📅] ← คลิกเพื่อเลือกวันที่    │
│                                            │
│ ╔══════════════════════════════════════╗   │
│ ║ 💡 คำแนะนำ:                         ║   │
│ ║ • ระบุเฉพาะวันที่เริ่มต้นเพื่อ      ║   │
│ ║   ดึงข้อมูลวันเดียว                 ║   │
│ ║ • ระบุทั้งวันที่เริ่มต้นและสิ้นสุด ║   │
│ ║   เพื่อดึงข้อมูลช่วงวันที่          ║   │
│ ║ • ระบบจะรอ 1 วินาทีระหว่าง         ║   │
│ ║   การดึงแต่ละวัน                    ║   │
│ ╚══════════════════════════════════════╝   │
│                                            │
│        [❌ ยกเลิก]  [✅ ยืนยันนำเข้า]     │
└────────────────────────────────────────────┘
```

### ข้อความแจ้งผลลัพธ์
```
┌────────────────────────────────────────────┐
│ ✅ นำเข้าข้อมูลสำเร็จ!                     │
│ ข้อมูลใหม่: 4 รายการ                      │
│ อัพเดต: 1 รายการ                          │
└────────────────────────────────────────────┘
```

---

## 💡 Tips & Tricks

### ✅ ควรทำ (Do's)

1. **ดึงข้อมูลครั้งละไม่เกิน 30 วัน**
   - ลดโอกาสเกิด timeout
   - ประมวลผลเร็วขึ้น

2. **เลือกวันที่จากปฏิทิน**
   - ไม่ต้องกลัวพิมพ์ผิด
   - ง่ายและรวดเร็ว

3. **ตรวจสอบข้อความแจ้งผลลัพธ์**
   - ดูจำนวนข้อมูลที่นำเข้าสำเร็จ
   - ตรวจสอบว่ามีวันที่ล้มเหลวหรือไม่

### ❌ ไม่ควรทำ (Don'ts)

1. **ไม่ควรดึงข้อมูลมากเกินไป**
   - หลีกเลี่ยงดึงข้อมูลทั้งปี (365 วัน) ในครั้งเดียว
   - แบ่งเป็นช่วงๆ จะดีกว่า

2. **ไม่ควรกดปุ่มซ้ำ**
   - รอให้การนำเข้าเสร็จก่อน
   - ปุ่มจะถูก disable ขณะกำลังนำเข้า

3. **ไม่ควรปิด browser ขณะกำลังนำเข้า**
   - รอจนกว่าจะเสร็จสิ้น
   - หากปิดไป การนำเข้าจะหยุดกลางคัน

---

## 🔧 การแก้ปัญหา

### ปัญหา: ไม่เห็นข้อมูลหลังนำเข้า
**แก้ไข:**
1. รอสักครู่ (ระบบ refresh อัตโนมัติหลัง 3 วินาที)
2. หรือคลิกปุ่ม "🔄 รีเฟรชข้อมูล" เอง
3. ปรับช่วงวันที่ให้ครอบคลุมวันที่นำเข้า

### ปัญหา: แสดง error "กรุณาระบุวันที่เริ่มต้น"
**แก้ไข:**
- คลิกช่อง "วันที่เริ่มต้น" และเลือกวันที่
- วันที่เริ่มต้นเป็นข้อมูลที่จำเป็น (required)

### ปัญหา: การนำเข้าล้มเหลว
**สาเหตุที่เป็นไปได้:**
1. API ของ กรมชลประทาน ไม่ตอบสนอง
2. ไม่มีข้อมูลสำหรับวันที่ที่เลือก
3. เครือข่ายมีปัญหา

**แก้ไข:**
1. ลองนำเข้าอีกครั้ง
2. ตรวจสอบ connection
3. ตรวจสอบ backend logs

### ปัญหา: Date picker ไม่แสดง
**แก้ไข:**
- อัปเดต browser เป็นเวอร์ชันล่าสุด
- ใช้ browser ที่รองรับ (Chrome, Firefox, Safari, Edge)

---

## 📊 ตัวอย่างการใช้งานจริง

### ตัวอย่างที่ 1: ดึงข้อมูลวันนี้
```
วันที่เริ่มต้น: 2025-11-13
วันที่สิ้นสุด: (เว้นว่าง)
→ ดึงเฉพาะวันที่ 13 พ.ย. 2568
```

### ตัวอย่างที่ 2: ดึงข้อมูลสัปดาห์ล่าสุด
```
วันที่เริ่มต้น: 2025-11-07
วันที่สิ้นสุด: 2025-11-13
→ ดึงข้อมูล 7 วัน (7-13 พ.ย. 2568)
```

### ตัวอย่างที่ 3: ดึงข้อมูลย้อนหลังเดือนที่แล้ว
```
วันที่เริ่มต้น: 2025-10-01
วันที่สิ้นสุด: 2025-10-31
→ ดึงข้อมูล 31 วัน (ตุลาคม 2568)
```

---

## ⏱️ ประมาณการเวลา

| จำนวนวัน | เวลาโดยประมาณ |
|----------|---------------|
| 1 วัน    | ~5 วินาที     |
| 7 วัน    | ~15 วินาที    |
| 30 วัน   | ~45 วินาที    |

*หมายเหตุ: เวลาจริงขึ้นกับความเร็ว API และเครือข่าย*

---

## 📚 เอกสารที่เกี่ยวข้อง

- [API_DATE_RANGE_GUIDE.md](API_DATE_RANGE_GUIDE.md) - คู่มือการใช้งาน API แบบละเอียด
- [CSV_IMPORT_GUIDE.md](CSV_IMPORT_GUIDE.md) - คู่มือการนำเข้า CSV
- [CHANGELOG.md](CHANGELOG.md) - ประวัติการอัปเดต
- [UI_IMPROVEMENTS.md](UI_IMPROVEMENTS.md) - รายละเอียดการปรับปรุง UI

---

## 🆕 อัปเดตล่าสุด (v1.2.1)

- ✅ เปลี่ยนจาก prompt dialog มาเป็น Modal Dialog
- ✅ เพิ่ม Date Picker พร้อมปฏิทิน
- ✅ UI สวยงาม responsive
- ✅ แปลงวันที่ ค.ศ. → พ.ศ. อัตโนมัติ
- ✅ Animation เรียบร้อย

---

## 💬 ติดต่อสอบถาม

หากมีปัญหาหรือข้อสงสัย:
1. ตรวจสอบเอกสารคู่มือ
2. ดู logs ที่ browser console (F12)
3. ตรวจสอบ backend logs

---

**เวอร์ชัน:** 1.2.1  
**วันที่อัปเดต:** 13 พฤศจิกายน 2568  
**สถานะ:** ✅ ใช้งานได้ปกติ
